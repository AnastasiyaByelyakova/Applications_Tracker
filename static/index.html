<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application Tracker</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìÑ Job Application Tracker</h1>
            <p>Manage your job applications with AI-powered insights</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="applications">üìã Applications</button>
            <button class="nav-tab" data-tab="profile">üë§ Profile</button>
            <button class="nav-tab" data-tab="estimate-chance">üéØ Job Chance</button>
            <button class="nav-tab" data-tab="tune-cv">üìù CV Tuner</button>
            <button class="nav-tab" data-tab="fill-profile">üìÑ Fill Profile</button>
        </div>

        <!-- Applications Tab -->
        <div id="applications" class="tab-content active">
            <div class="form-group">
                <button class="btn btn-primary" id="add-app-btn">+ Add New Application</button>
            </div>

            <div id="add-application-form" style="display: none;">
                <h3>Add New Job Application</h3>
                <form id="application-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Job Title</label>
                            <input type="text" id="job-title" required>
                        </div>
                        <div class="form-group">
                            <label>Company</label>
                            <input type="text" id="company" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="description" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Link</label>
                        <input type="url" id="link">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Application Date</label>
                            <input type="date" id="application-date" required>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="status">
                                <option value="Applied">Applied</option>
                                <option value="Interview">Interview</option>
                                <option value="Rejection">Rejection</option>
                                <option value="Offer">Offer</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Upload CV (Optional)</label>
                        <input type="file" id="cv-file" accept=".pdf,.doc,.docx">
                    </div>
                    <div class="form-group">
                        <label>Cover Letter (Optional)</label>
                        <textarea id="cover-letter" rows="6"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Save Application</button>
                        <button type="button" class="btn btn-secondary" id="cancel-app-btn">Cancel</button>
                    </div>
                </form>
            </div>

            <div class="filter-sort-controls">
                <div class="form-group">
                    <input type="text" id="filter-applications" placeholder="Filter applications...">
                </div>
                <div class="form-group">
                    <label for="view-toggle">View:</label>
                    <select id="view-toggle">
                        <option value="cards">Cards</option>
                        <option value="table">Table</option>
                    </select>
                </div>
            </div>

            <div id="application-list-cards" class="application-cards">
                <!-- Application cards will be loaded here -->
            </div>

            <div id="application-list-table" class="application-table" style="display: none;">
                <table>
                    <thead>
                        <tr>
                            <th data-sort="job_title">Job Title</th>
                            <th data-sort="company">Company</th>
                            <th data-sort="application_date">Date</th>
                            <th data-sort="status">Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applications-table-body">
                        <!-- Application rows will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="profile" class="tab-content">
            <h3>üë§ Your Profile</h3>
            <form id="profile-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="profile-full-name">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="profile-email">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="profile-phone">
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="profile-location">
                    </div>
                </div>
                <div class="form-group">
                    <label>Summary</label>
                    <textarea id="profile-summary" rows="6"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>LinkedIn URL</label>
                        <input type="url" id="profile-linkedin">
                    </div>
                    <div class="form-group">
                        <label>GitHub URL</label>
                        <input type="url" id="profile-github">
                    </div>
                </div>
                <div class="form-group">
                    <label>Portfolio URL</label>
                    <input type="url" id="profile-portfolio">
                </div>
                <div class="form-group">
                    <label>Current CV (for profile)</label>
                    <input type="file" id="profile-cv-file" accept=".pdf,.doc,.docx">
                    <p id="profile-cv-filename"></p>
                </div>

                <h4>Education</h4>
                <div id="education-list">
                    <!-- Education items will be loaded here -->
                </div>
                <button type="button" class="btn btn-secondary" id="add-education-btn">+ Add Education</button>

                <h4>Experience</h4>
                <div id="experience-list">
                    <!-- Experience items will be loaded here -->
                </div>
                <button type="button" class="btn btn-secondary" id="add-experience-btn">+ Add Experience</button>

                <h4>Skills</h4>
                <div id="skills-list">
                    <!-- Skills will be loaded here -->
                </div>
                <button type="button" class="btn btn-secondary" id="add-skill-btn">+ Add Skill</button>

                <h4>Languages</h4>
                <div id="languages-list">
                    <!-- Languages will be loaded here -->
                </div>
                <button type="button" class="btn btn-secondary" id="add-language-btn">+ Add Language</button>

                <h4>Certifications</h4>
                <div id="certifications-list">
                    <!-- Certifications will be loaded here -->
                </div>
                <button type="button" class="btn btn-secondary" id="add-certification-btn">+ Add Certification</button>

                <button type="submit" class="btn btn-primary">Save Profile</button>
            </form>
        </div>

        <!-- Job Chance Tab -->
        <div id="estimate-chance" class="tab-content">
            <div class="ai-tool-section">
                <h3>üéØ Job Chance Estimator</h3>
                <p>Analyze your profile against a job description to estimate your chances.</p>

                <div class="form-group">
                    <label>Job Description</label>
                    <textarea id="job-desc-chance" rows="6" placeholder="Paste the job description here..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>AI Provider</label>
                        <select id="ai-provider-chance">
                            <option value="openai">OpenAI GPT</option>
                            <option value="gemini">Google Gemini</option>
                            <option value="claude">Anthropic Claude</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>API Key</label>
                        <input type="password" id="api-key-chance" placeholder="Enter your API key">
                    </div>
                </div>

                <button class="btn btn-primary" id="estimate-chance-btn">Estimate Chance</button>

                <div id="chance-loading" class="loading">
                    <div class="spinner"></div>
                    <p>Estimating your job chances...</p>
                </div>

                <div id="chance-result" class="ai-result" style="display: none;"></div>
            </div>
        </div>

        <!-- CV Tuner Tab -->
        <div id="tune-cv" class="tab-content">
            <div class="ai-tool-section">
                <h3>üìù CV Tuner</h3>
                <p>Get a tailored CV optimized for a specific job.</p>

                <div class="form-group">
                    <label>Job Description</label>
                    <textarea id="job-desc-cv" rows="6" placeholder="Paste the job description here..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>AI Provider</label>
                        <select id="ai-provider-cv">
                            <option value="openai">OpenAI GPT</option>
                            <option value="gemini">Google Gemini</option>
                            <option value="claude">Anthropic Claude</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>API Key</label>
                        <input type="password" id="api-key-cv" placeholder="Enter your API key">
                    </div>
                </div>

                <button class="btn btn-primary" id="tune-cv-btn">Generate Tuned CV</button>

                <div id="cv-loading" class="loading">
                    <div class="spinner"></div>
                    <p>Generating your tuned CV...</p>
                </div>

                <div id="cv-result" class="ai-result" style="display: none;"></div>
            </div>
        </div>

        <!-- Fill Profile from Resume Tab -->
        <div id="fill-profile" class="tab-content">
            <div class="ai-tool-section">
                <h3>üìÑ Fill Profile from Resume (AI)</h3>
                <p>Upload your resume (PDF) and let AI fill out your profile automatically.</p>

                <div class="form-group">
                    <label>Upload Resume (PDF only)</label>
                    <input type="file" id="resume-pdf-input" accept=".pdf">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>AI Provider</label>
                        <select id="ai-provider-fill-profile">
                            <option value="gemini">Google Gemini (Recommended for PDF)</option>
                            <!-- Other options disabled as per backend logic -->
                            <option value="openai" disabled>OpenAI GPT</option>
                            <option value="claude" disabled>Anthropic Claude</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>API Key</label>
                        <input type="password" id="api-key-fill-profile" placeholder="Enter your API key">
                    </div>
                </div>

                <button class="btn btn-primary" id="fill-profile-btn">Fill Profile</button>

                <div id="fill-profile-loading" class="loading">
                    <div class="spinner"></div>
                    <p>Extracting profile from resume...</p>
                </div>

                <div id="fill-profile-result" class="ai-result" style="display: none;"></div>
            </div>
        </div>

    </div>

    <!-- Application Details Modal -->
    <div id="application-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeApplicationDetailModal()">&times;</span>
            <h3 id="modal-job-title"></h3>
            <p><strong>Company:</strong> <span id="modal-company"></span></p>
            <p><strong>Status:</strong> <span id="modal-status" class="status-badge"></span></p>
            <p><strong>Applied On:</strong> <span id="modal-application-date"></span></p>
            <p><strong>Description:</strong> <span id="modal-description"></span></p>
            <p><strong>Job Link:</strong> <a id="modal-link" href="#" target="_blank">View Job Posting</a></p>
            <p><strong>CV File:</strong> <span id="modal-cv-file-name"></span> <a id="modal-cv-file-link" href="#" target="_blank" style="display: none;">Download CV</a></p>
            <p><strong>Cover Letter:</strong> <span id="modal-cover-letter"></span></p>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>
